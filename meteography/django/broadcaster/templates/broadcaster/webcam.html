{% extends "broadcaster/base.html" %}
{% load broadcastertags %}

{% block title %}{{ webcam.name }} meteography{% endblock %}

{% block body %}
  <h1>{{ webcam.name }} meteography</h1>
  <section>
    <h2>List of prediction configurations</h2>

    {% with params_list=webcam.predictionparams_set.all %}
      {% if params_list %}
        <ul class="pred-recap">
          {% for params in params_list %}
            <li>
              {% latest_prediction params %}

              <div class="details-panel">
                <table class="pred-history">
                  <tr>
                    <td>Computed on (UTC)</td>
                    <td>Predicted</td>
                    <td>Happened</td>
                    <td>Error</td>
                  </tr>
                  {% for prediction in params.history %}
                    <tr>
                      <td>{{ prediction.comp_date }}</td>
                      <td><img src="{{ prediction.url }}" class="thumbnail" /></td>
                      <td><img src="{{ prediction.actual }}" class="thumbnail" /></td>
                      <td>{{ prediction.error|floatformat:2 }}</td>
                    </tr>
                  {% endfor %}
                </table>
                <img src="{% url 'error_graph' webcam.webcam_id params.name %}"
                     class="errgraph" alt="Evolution of prediction error over time"/>
              </div>
            </li>
          {% endfor %}
        </ul>

      {% else %}
        <p>No prediction configuration available.</p>
      {% endif %}
    {% endwith %}
  </section>
{% endblock %}

